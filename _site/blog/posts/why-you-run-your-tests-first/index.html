<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Why You Run Your Tests First | Peter Debelak</title>
    <meta name="description" content="Why you should always run your tests first and see them fail during test-driven development">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <style>
      *{box-sizing:border-box}body,html{height:100%;margin:0}header{background-color:#017890;overflow:auto;padding-right:15px;padding-left:15px}.container{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:750px){.container{width:750px}}@media (min-width:992px){.container{width:970px}}@media (min-width:1200px){.container{width:1170px}}header{margin-bottom:30px}header a{text-decoration:none;color:#fff}
    </style>
    <script>
      if (document.location.hostname.match('peterdebelak.com')) {
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-64190606-1', 'auto');
        ga('send', 'pageview');
      }
    </script>
  </head>
  <body >
    <div class="wrapper">
      <header class="container-fluid">
        <h1><a id="home" href="/">Peter Debelak</a></h1>
      </header>

      <div class="container" >
        <nav class="col-md-3 col-md-push-9 col-sm-4 col-sm-push-8 navbar navbar-default" role="navigation">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#sidebar">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <p class="navbar-text visible-xs-block">Menu </p>
  </div>
  <div class="collapse navbar-collapse" id="sidebar">
    <ul class="nav nav-pills nav-stacked">
      <li class=""><a id="about" href="/about/">About</a></li>
      <li class=""><a id="resume" href="/resume/">Resume</a></li>
      <li class="active"><a id="blog" href="/blog/posts">Blog</a></li>
      <li><a id="github" href="https://github.com/pdebelak">Peter on Github</a></li>
    </ul>
  </div>
</nav>

<div class="col-md-9 col-md-pull-3 col-sm-8 col-sm-pull-4" id="main-content">
  <h1>Why You Run Your Tests First</h1>
<p class="date-line">Last updated 14 June 2015</p>
<p>When first learning test-driven-development, there are a lot of things about it
that seem stupid and arbitrary. After working with it a while, though, you
start to see that at least some of the rules make a lot of sense. The phrase
most associated with TDD is “red, green, refactor”. Now, when I was first
learning about TDD the green and refactor steps made a lot of sense, but why
do I need to do the red step? I <em>know</em> the test will fail, because I haven’t
written the code yet!</p>

<p>Now I understand, though, so I wanted to share what I learned with future
doubters.</p>

<p class="lead">You only <em>think</em> you know what the bug is</p>

<p>When fixing bugs in a large project at work, I usually have an exception that
occurred in production with details in <a href="https://github.com/honeybadger-io/honeybadger-ruby">honeybadger</a>.
I usually read the trace from the exception and think through where the problem
might be. I then tend to have a very good idea of how to solve the issue.</p>

<p>The only way I <em>know</em> I’m fixing the issue, though, is to write a test that
replicates the problem. Frequently I’ll write the test and, by running it, discover that it
doesn’t actually cause the same exception I expected it to, or that it doesn’t cause
any exception at all! If I wrote the test, changed the code, and then ran the
test I’d think that the bug was fixed. By running the test first I verify that
I’m fixing the thing I think I am.</p>

<p>The same idea applies to writing new features. If you run your tests first,
you can verify that you are getting the error you expect to get. When you write
a test like this:</p>

<pre><code>specify { Thing.new.do_thing.should == "hello" }
</code></pre>

<p>And your current code is:</p>

<pre><code>class Thing
  def do_thing
  end
end
</code></pre>

<p>You run the test to see <code>expected "doing a thing", got nil</code>. This means that
the rest of your code is working as you expect, and your planned code will make
the test pass. Without running the test, you might write your code, then
discover that you mistyped the method name, or that your method is returning
something unexpected. Until you get the failure you want, you don’t really
understand your code.</p>

<p>I hope that helps explain why the seemingly stupid step of running a test you
know will fail is actually helpful.</p>

<div id="disqus_thread"></div>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

<nav>
  <ul class="pager">
    
      <li class="previous">
        <a id="previous" href="/blog/posts/switching-away-from-angular/">&larr; Older post</a>
      </li>
    
    
      <li class="next">
        <a id="next" href="/blog/posts/tappety-tap-tap-tap-object-tap-in-ruby/">Newer post &rarr;</a>
      </li>
    
  </ul>
</nav>
<script type="text/javascript">
  var disqus_shortname = 'peterdebelak';
  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

</div>

      </div>
      <div class="push"></div>
    </div>
    <footer class="container-fluid">
      <span class="pull-left">Press <code>?</code> for help</span>
      <h4 class="text-right">
        <a href="mailto:pdebelak@gmail.com">Contact Peter</a>
      </h4>
    </footer>
    <link rel="stylesheet" href="/css/main.css">
    <script src="/js/main.min.js"></script>
    <script type="text/javascript">
      var disqus_shortname = 'peterdebelak';
      (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
    </script>
  </body>
</html>
